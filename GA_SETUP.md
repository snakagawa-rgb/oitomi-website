# Google Analytics 4 設定ガイド

## 1. Google Analytics アカウントの作成

### ステップ1: アカウント作成
1. https://analytics.google.com/ にアクセス
2. Googleアカウントでログイン
3. 「測定を開始」をクリック

### ステップ2: アカウント設定
- アカウント名: 任意（例：My Business）
- データ共有設定: デフォルトでOK

### ステップ3: プロパティ設定
- プロパティ名: `OITOMI Site`
- レポートのタイムゾーン: `日本`
- 通貨: `日本円（JPY ¥）`

### ステップ4: ビジネス情報
- 業種: `その他`
- ビジネスの規模: 該当するものを選択

### ステップ5: データストリーム作成
1. プラットフォーム: `ウェブ`を選択
2. ウェブサイトのURL: 
   - 開発時: `http://localhost:3000`
   - 本番時: `https://your-domain.com`
3. ストリーム名: `OITOMI開発環境`

### ステップ6: 測定IDを取得
- `G-XXXXXXXXXX`形式のIDが表示される
- このIDをコピー

## 2. サイトへの設定

### .env.localファイルを編集
```bash
# .env.local
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
```
※ `G-XXXXXXXXXX`を実際の測定IDに置き換える

### サーバーを再起動
```bash
npm run dev
```

## 3. 計測データの確認方法

### リアルタイムレポート
1. Google Analyticsにログイン
2. 左メニューから「レポート」→「リアルタイム」
3. サイトにアクセスして確認

### イベントの確認
1. 「レポート」→「エンゲージメント」→「イベント」
2. 以下のイベントが記録される：
   - `page_view`: ページ閲覧
   - `click`: 商品クリック（カスタムイベント）

### 商品クリックの詳細確認
1. 「レポート」→「エンゲージメント」→「イベント」
2. `click`イベントをクリック
3. 「イベントパラメータ」で詳細を確認：
   - `event_category`: Product
   - `event_label`: 商品ID - 商品名

## 4. デバッグ方法

### Chrome拡張機能を使用
1. 「Google Analytics Debugger」をインストール
2. 拡張機能を有効化
3. デベロッパーツールのConsoleタブでイベントを確認

### DebugViewを使用
1. Google Analyticsの「管理」→「DebugView」
2. リアルタイムでイベントの送信を確認

## 5. よくある質問

### Q: localhost でも計測できる？
A: はい、開発環境でも計測可能です。

### Q: 計測が反映されない
A: 以下を確認してください：
- .env.localに正しい測定IDが設定されているか
- サーバーを再起動したか
- ブラウザの広告ブロッカーが無効になっているか

### Q: どのくらいで反映される？
A: リアルタイムレポートは即座に、通常のレポートは24-48時間かかります。